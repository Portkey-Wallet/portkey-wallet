use_frameworks!

source 'https://gitee.com/mirrors/CocoaPods-Specs.git'

platform :ios, '13.0'

$root_path = "../../.."
$node_modules = "#{$root_path}/node_modules"
$react_native_path = "#{$node_modules}/react-native"

require_relative "#{$node_modules}/react-native/scripts/react_native_pods"
require_relative "#{$node_modules}/@react-native-community/cli-platform-ios/native_modules"

target 'AelfPortkey_Example' do
  
  use_react_native!(path: $react_native_path, hermes_enabled: false)
#  use_react_native!(
#     :path => $react_native_path],
#     # to enable hermes on iOS, change `false` to `true` and then install pods
#     # By default, Hermes is disabled on Old Architecture, and enabled on New Architecture.
#     # You can enable/disable it manually by replacing `flags[:hermes_enabled]` with `true` or `false`.
#    :hermes_enabled => true
#  )
  
  pod 'AelfPortkey', :path => '../'

  target 'AelfPortkey_Tests' do
    inherit! :search_paths

    pod 'FBSnapshotTestCase'
  end
  
  post_install do |installer|
    # https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L197-L202
    react_native_post_install(
      installer,
      $react_native_path,
      :mac_catalyst_enabled => false
    )
    __apply_Xcode_12_5_M1_post_install_workaround(installer)
  end
end
